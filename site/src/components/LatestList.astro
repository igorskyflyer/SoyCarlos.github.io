---
import { getCollection } from 'astro:content';
import PostExcerpt from '@igor.dvlpr/astro-post-excerpt';
var posts = await getCollection('blog', ({ data }: { data: { isDraft: boolean } }) => {
    return data.isDraft !== true;
});


posts = posts.sort((a, b) => {
    const dateA = new Date(a.data.publishDate);
    const dateB = new Date(b.data.publishDate);
    return dateB.getTime() - dateA.getTime();
});


---
<div class="text-4xl font-bold py-10 text-center">Latest Updates</div>
{posts.map((newestPost) => (
<div class="m-auto w-full px-2 md:px-0 md:w-2/3">
    <ul>
        <div class="flex-col">
            <li>
                <a href={`/blog/${newestPost.slug}`} class="font-bold text-2xl hover:underline md:text-4xl">{newestPost.data.title}</a>
                <a href={`/blog/${newestPost.slug}`} class="flex">{newestPost.data.publishDate}</a>
                <a
					href={`/blog/${newestPost.slug}`}
					class="flex pb-10">
					    <PostExcerpt
							post={newestPost}
							words={50}
							addEllipsis={true}
							smartEllipsis={true}
						/>
				</a>
            </li>
        </div>
    </ul>
</div>
))}
